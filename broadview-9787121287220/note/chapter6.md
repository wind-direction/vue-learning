# 第6章 过滤器

- 本质上是函数。
- 作用在于用户输入数据后，它能够处理，并返回一个数据结果。
- 使用管道符进行连接。
- 支持任何出现表达式的地方添加过滤器。
- 可以接受参数，参数之间以空格分隔。
- 始终以表达式的值最为第一个参数。

## 6.1 内置过滤器

- 字母操作
    - capitalize: 首字母转成大写
    - uppercase: 转换成大写
    - lowercase: 转换成小写
- 限制
    - limitBy: 限制数组为开始的前N个元素，其中N由传入的第一个参数指定，第二个参数可选，指定偏移量
    - filterBy:
    - orderBy: 返回排序后的数组。
- json:（本质上是JSON.stringify()的精简缩略版）
- currency: 将数字值转换成货币形式输出。第一个为货币符号，默认值为"$"。第二个参数执行小数位。
- debounce: 延迟处理器一定时间执行。

## 6.2 自定义过滤器

### 6.2.1 filter语法

```javascript
Vue.filter(ID, function(){});
```

1. 单个参数
2. 多参数
3. 双向过滤器
4. 动态参数
    - 如果过滤器参数没有用引号包起来，则它会咋当前vm作用域内动态计算。
    - 过滤器函数的this始终指向调用它的vm。

### 6.2.2 教你写一个filter

1. 需要给定过滤器一个唯一标识。
2. 过滤器函数的作用是对输入进行处理后输出，因此最后要返回有意义的值。不返回不会报错，但这样的过滤器就没有了意义。

## 6.3 源码实现

### 6.3.1 管道实现

```bash
Vue.prototype.$eval
|- parseDirective               // 整理输出一个对象
|   |-pushFilter                // 将过滤器函数加入对象内的filters数组中
|   |   |- processFilterArg     // 检查一个参数是否为动态参数
Vue.prototype._applyFilters     // 依次调用过滤器数组中的过滤器
```